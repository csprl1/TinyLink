(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[524],{1504:function(e,t,s){Promise.resolve().then(s.bind(s,3986))},3986:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var l=s(7437),a=s(2265);function n(e){let{params:t}=e,{code:s}=t,[n,c]=(0,a.useState)(null),[i,r]=(0,a.useState)(!0),[d,o]=(0,a.useState)(null),x=window.location.origin;(0,a.useEffect)(()=>{!async function(){try{r(!0);let e=await fetch("/api/links/".concat(s));if(e.ok){let t=await e.json();c(t),o(null)}else o("Link not found"),c(null)}catch(e){o("Failed to load stats")}finally{r(!1)}}()},[s]);let h=async()=>{window.confirm("Delete this link?")&&((await fetch("/api/links/".concat(s),{method:"DELETE"})).ok?(alert("Deleted. Redirect will now return 404."),c(null)):alert("Failed to delete"))};return(0,l.jsxs)("main",{children:[(0,l.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Stats for: ",s]}),i&&(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"Loading..."}),d&&(0,l.jsx)("p",{className:"text-sm text-red-400 bg-red-950/30 px-3 py-2 rounded",children:d}),!i&&!d&&!n&&(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"Link not found."}),n&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-slate-900/60 border border-slate-800 rounded-lg p-4 space-y-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-xs text-slate-400",children:"Short URL"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("code",{className:"text-sm",children:[x,"/",n.code]}),(0,l.jsx)("button",{className:"text-xs border border-slate-600 rounded px-2 py-1 hover:bg-slate-800",onClick:()=>navigator.clipboard.writeText("".concat(x,"/").concat(n.code)),children:"Copy"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-xs text-slate-400",children:"Target URL"}),(0,l.jsx)("p",{className:"text-sm break-all text-sky-300",children:(0,l.jsx)("a",{href:n.url,target:"_blank",children:n.url})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-xs text-slate-400",children:"Total Clicks"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:n.clicks})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-xs text-slate-400",children:"Last Clicked"}),(0,l.jsx)("p",{children:n.lastClicked?new Date(n.lastClicked).toLocaleString():"Never"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-xs text-slate-400",children:"Created At"}),(0,l.jsx)("p",{children:new Date(n.createdAt).toLocaleString()})]})]})]}),(0,l.jsx)("button",{className:"text-xs bg-red-600 hover:bg-red-700 px-3 py-2 rounded",onClick:h,children:"Delete Link"})]})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=1504)}),_N_E=e.O()}]);